import streamlit as st
from streamlit_extras.dataframe_explorer import dataframe_explorer
import numpy as np
import pandas as pd
from transformers import pipeline
from PIL import  Image
import matplotlib.pyplot as plt
import seaborn as sns; sns.set()
import plotly.express as px
import nltk 
# для корректного переноса времени сообщений в jsonp
import configparser
import json
from telethon.sync import TelegramClient
from telethon import connection
from datetime import date, datetime
# классы для работы с каналами
from telethon.tl.functions.channels import GetParticipantsRequest
from telethon.tl.types import ChannelParticipantsSearch
# класс для работы с сообщениями
from telethon.tl.functions.messages import GetHistoryRequest


def intro():

  # Считываем учетные данные
  config = configparser.ConfigParser()
  config.read("config.ini")
  # Присваиваем значения внутренним переменным
  api_id   = config['Telegram']['api_id']
  api_hash = config['Telegram']['api_hash']
  username = config['Telegram']['username']

  client = TelegramClient(username, api_id, api_hash)

  client.start()
  
  

  async def main():
    url = input("Введите ссылку на канал или чат: ")
    channel = await client.get_entity(url)
    await (channel)
	await dump_all_messages(channel)

  with client:
    client.loop.run_until_complete(main())




   